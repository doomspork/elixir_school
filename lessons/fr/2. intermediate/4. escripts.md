### Exécutables

Pour construire des exécutables en Elixir, nous allons utiliser escript.

Escript produit un exécutable qui peut être exécuté sur tout système sur lequel Erlang est installé.

## Démarrage

Pour créer un exécutable avec escript, il n'y a que quelques choses à faire : implémenter une fonction `main/1` et mettre à jour notre Mixfile.

Nous allons commencer par créer un module qui servira de point d'entrée à notre exécutable.
C'est ici que nous implémenterons `main/1` :

```elixir
defmodule ExampleApp.CLI do
  def main(args \\\]) do
    # Faire des choses
  end
end
```

Ensuite, nous devons mettre à jour notre Mixfile pour inclure l'option `:escript` pour notre projet tout en spécifiant notre `:main_module` :

```elixir
defmodule ExampleApp.Mixproject do
  def project do
    [app : :example_app, version : "0.0.1", escript : escript()]
  end

  defp escript do
    [main_module : ExampleApp.CLI]
  end
end
```

## Analyse des arguments

Avec notre application configurée, nous pouvons passer à l'analyse des arguments de la ligne de commande.
Pour ce faire, nous allons utiliser `OptionParser.parse/2` d'Elixir avec l'option `:switches` pour indiquer que notre drapeau est booléen :

```elixir
defmodule ExampleApp.CLI do
  def main(args \\\]) do
    args
    |> parse_args()
    |> réponse()
    |> IO.puts()
  end

  defp parse_args(args) do
    {opts, mot, _} =
      args
      |> OptionParser.parse(switches : [upcase : :boolean])

    {opts, List.to_string(word)}
  end

  defp response({opts, word}) do
    si opts[:upcase], do : String.upcase(word), else : word
  end
end
```

## Construction

Une fois que nous avons fini de configurer notre application pour utiliser escript, la construction de notre exécutable est un jeu d'enfant avec Mix :

```bash
$ mix escript.build
```

Allons-y pour un essai :

```bash
$ ./example_app --upcase Bonjour
HELLO

$ ./exemple_app Hi
Salut
```

Voilà, c'est fait.
Nous avons construit notre premier exécutable en Elixir en utilisant escript.
